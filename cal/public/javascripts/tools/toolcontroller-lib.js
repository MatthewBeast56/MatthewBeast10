// toolcontroller-lib.js 8.14 Fri Sep 20 2019 08:27:56 GMT-0700 (Pacific Daylight Time)

!function(t,o){t.ToolControllerAPI=o()}(this,function(){var t,o,e;return function(n){function i(t,o){return p.call(t,o)}function r(t,o){var e,n,i,r,a,l,c,s,u,h,d=o&&o.split("/"),f=C.map,T=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(o){for(d=d.slice(0,d.length-1),t=d.concat(t.split("/")),s=0;s<t.length;s+=1)if(h=t[s],"."===h)t.splice(s,1),s-=1;else if(".."===h){if(1===s&&(".."===t[2]||".."===t[0]))break;s>0&&(t.splice(s-1,2),s-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((d||T)&&f){for(e=t.split("/"),s=e.length;s>0;s-=1){if(n=e.slice(0,s).join("/"),d)for(u=d.length;u>0;u-=1)if(i=f[d.slice(0,u).join("/")],i&&(i=i[n])){r=i,a=s;break}if(r)break;!l&&T&&T[n]&&(l=T[n],c=s)}!r&&l&&(r=l,a=c),r&&(e.splice(0,a,r),t=e.join("/"))}return t}function a(t,o){return function(){return f.apply(n,E.call(arguments,0).concat([t,o]))}}function l(t){return function(o){return r(o,t)}}function c(t){return function(o){_[t]=o}}function s(t){if(i(I,t)){var o=I[t];delete I[t],g[t]=!0,d.apply(n,o)}if(!i(_,t)&&!i(g,t))throw new Error("No "+t);return _[t]}function u(t){var o,e=t?t.indexOf("!"):-1;return e>-1&&(o=t.substring(0,e),t=t.substring(e+1,t.length)),[o,t]}function h(t){return function(){return C&&C.config&&C.config[t]||{}}}var d,f,T,O,_={},I={},C={},g={},p=Object.prototype.hasOwnProperty,E=[].slice;T=function(t,o){var e,n=u(t),i=n[0];return t=n[1],i&&(i=r(i,o),e=s(i)),i?t=e&&e.normalize?e.normalize(t,l(o)):r(t,o):(t=r(t,o),n=u(t),i=n[0],t=n[1],i&&(e=s(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:e}},O={require:function(t){return a(t)},exports:function(t){var o=_[t];return"undefined"!=typeof o?o:_[t]={}},module:function(t){return{id:t,uri:"",exports:_[t],config:h(t)}}},d=function(t,o,e,r){var l,u,h,d,f,C,p=[];if(r=r||t,"function"==typeof e){for(o=!o.length&&e.length?["require","exports","module"]:o,f=0;f<o.length;f+=1)if(d=T(o[f],r),u=d.f,"require"===u)p[f]=O.require(t);else if("exports"===u)p[f]=O.exports(t),C=!0;else if("module"===u)l=p[f]=O.module(t);else if(i(_,u)||i(I,u)||i(g,u))p[f]=s(u);else{if(!d.p)throw new Error(t+" missing "+u);d.p.load(d.n,a(r,!0),c(u),{}),p[f]=_[u]}h=e.apply(_[t],p),t&&(l&&l.exports!==n&&l.exports!==_[t]?_[t]=l.exports:h===n&&C||(_[t]=h))}else t&&(_[t]=e)},t=o=f=function(t,o,e,i,r){return"string"==typeof t?O[t]?O[t](o):s(T(t,o).f):(t.splice||(C=t,o.splice?(t=o,o=e,e=null):t=n),o=o||function(){},"function"==typeof e&&(e=i,i=r),i?d(n,t,o,e):setTimeout(function(){d(n,t,o,e)},4),f)},f.config=function(t){return C=t,C.deps&&f(C.deps,C.callback),f},e=function(t,o,e){o.splice||(e=o,o=[]),i(_,t)||i(I,t)||(I[t]=[t,o,e])},e.amd={jQuery:!0}}(),e("almond",function(){}),e("buttons/DesmosButton",[],function(){"use strict";var t,o={id:"calculatorFourFunction",icon:"tn8-icon-calculator",titleKey:"tools:desmosFourFunctionCalculator",previewerTitle:"Desmos Basic Four Function Calculator",href:"#calculatorFourFunction",isDesmosCalc:!0,on:function(){var o=this;$(document).trigger("Used.DesmosCalcFourFunction"),t.setDeepZoomStatus(TN8.deepZoomLayer&&TN8.deepZoomLayer.isActive),t.clear(),t.createFourFunctionCalculator(),$(document).one("desmosReady",function(t,e){e.type===($.i18n?$.i18n.t(o.titleKey):o.previewerTitle)&&($(document).trigger("tn.loadingModal.off"),window.app&&loading.modal("hide"),$(document).trigger("desmosFocusInput",{calcId:22}))})},off:function(){t.off()},setContentContainer:function(o){try{t=desmosAPI.createToolbox($("#divCalculator"))}catch(t){throw new Error("desmosAPI is undefined")}}},e={id:"calculatorGraphing",icon:"tn8-icon-calculator",titleKey:"tools:desmosGraphingCalculator",previewerTitle:"Desmos Graphing Calculator",href:"#calculatorGraphing",isDesmosCalc:!0,on:function(){var o=this;$(document).trigger("Used.DesmosCalcGraphing"),t.setDeepZoomStatus(TN8.deepZoomLayer&&TN8.deepZoomLayer.isActive),t.clear(),t.createGraphingCalculator(),$(document).one("desmosReady",function(t,e){e.type===($.i18n?$.i18n.t(o.titleKey):o.previewerTitle)&&($(document).trigger("tn.loadingModal.off"),window.app&&loading.modal("hide"))})},off:function(){t.off()},setContentContainer:function(o){try{t=desmosAPI.createToolbox($("#divCalculator"))}catch(t){throw new Error("desmosAPI is undefined")}}},n={id:"calculatorScientific",icon:"tn8-icon-calculator",titleKey:"tools:desmosScientificCalculator",previewerTitle:"Desmos Scientific Calculator",href:"#calculatorScientific",isDesmosCalc:!0,on:function(){var o=this;$(document).trigger("Used.DesmosCalcScientific"),t.setDeepZoomStatus(TN8.deepZoomLayer&&TN8.deepZoomLayer.isActive),t.clear(),t.createScientificCalculator(),$(document).one("desmosReady",function(t,e){e.type===($.i18n?$.i18n.t(o.titleKey):o.previewerTitle)&&($(document).trigger("tn.loadingModal.off"),window.app&&loading.modal("hide"),$(document).trigger("desmosFocusInput",{calcId:23}))})},off:function(){t.off()},setContentContainer:function(o){try{t=desmosAPI.createToolbox($("#divCalculator"))}catch(t){throw new Error("desmosAPI is undefined")}}};return{FourFunctionCalculator:o,GraphingCalculator:e,ScientificCalculator:n}}),e("buttons/Button",[],function(){"use strict";return{_$contentEl:null,icon:"",titleKey:"",href:"",on:function(){},off:function(){},setContentContainer:function(t){this._$contentEl=t}}}),e("buttons/PointerButton",["./Button"],function(t){"use strict";var o=$.extend(!0,{},t,{icon:"tn8-icon-pointer",titleKey:"tools:pointer",previewerTitle:"Pointer",href:"#pointer",on:function(){"undefined"!=typeof this._$contentEl.measurementToolbox&&this._$contentEl.measurementToolbox("clear"),$(document).trigger("Used.Pointer")},off:function(){"undefined"!=typeof this._$contentEl.measurementToolbox&&this._$contentEl.measurementToolbox("clear")}});return o}),e("buttons/QuarterInchRuler",["./Button"],function(t){"use strict";var o=$.extend(!0,{},t,{icon:"tn8-icon-ruler",titleKey:"tools:quarterInchRuler",previewerTitle:"Inch Ruler",href:"#rulerQuarterInches",on:function(){this._$contentEl.measurementToolbox("clear"),this._$contentEl.measurementToolbox("rulerQuarterInches"),$(document).trigger("Used.RulerQuarter")},off:function(){this._$contentEl.measurementToolbox("clear")}});return o}),e("buttons/EighthInchRuler",["./Button"],function(t){"use strict";var o=$.extend(!0,{},t,{icon:"tn8-icon-ruler",titleKey:"tools:eightInchRuler",previewerTitle:"Inch Ruler",href:"#rulerEighthInches",on:function(){this._$contentEl.measurementToolbox("clear"),this._$contentEl.measurementToolbox("rulerEighthInches"),$(document).trigger("Used.RulerEighth")},off:function(){this._$contentEl.measurementToolbox("clear")}});return o}),e("buttons/CentimeterRuler",["./Button"],function(t){"use strict";var o=$.extend(!0,{},t,{icon:"tn8-icon-ruler",titleKey:"tools:centimeterRuler",previewerTitle:"Centimeter Ruler",href:"#rulerCentimeter",on:function(){this._$contentEl.measurementToolbox("clear"),this._$contentEl.measurementToolbox("rulerCentimeter"),$(document).trigger("Used.RulerCentimeter")},off:function(){this._$contentEl.measurementToolbox("clear")}});return o}),e("buttons/MillimeterRuler",["./Button"],function(t){"use strict";var o=$.extend(!0,{},t,{icon:"tn8-icon-ruler",titleKey:"tools:millimeterRuler",previewerTitle:"Millimeter Ruler",href:"#rulerMillimeter",on:function(){this._$contentEl.measurementToolbox("clear"),this._$contentEl.measurementToolbox("rulerMillimeter"),$(document).trigger("Used.RulerMillimeter")},off:function(){this._$contentEl.measurementToolbox("clear")}});return o}),e("buttons/StraightEdge",["./Button"],function(t){"use strict";var o,e=$.extend(!0,{},t,{icon:"tn8-icon-straight-line",titleKey:"tools:straightEdge",previewerTitle:"Straightedge",href:"#straightEdge",on:function(){o.prototype.render(),$(document).trigger("Used.Straightedge")},off:function(){o.prototype.destroy()},setContentContainer:function(t){if("undefined"==typeof straightedgeAPI)throw new Error("StraightEdgeAPI is undefined");o=straightedgeAPI.createToolbox(t).straightedge,this.el=t,0===$("#straightEdge",this.el).length&&o&&o.prototype.init(t)}});return e}),e("buttons/Protractor",["./Button"],function(t){"use strict";var o=$.extend(!0,{},t,{icon:"tn8-icon-protractor",titleKey:"tools:protractor",previewerTitle:"Protractor",href:"#protractor",on:function(){this._$contentEl.measurementToolbox("clear"),this._$contentEl.measurementToolbox("protractor"),$(document).trigger("Used.Protractor")},off:function(){this._$contentEl.measurementToolbox("clear")}});return o}),e("buttons/SingleDegreeProtractorButton",["./Button"],function(t){"use strict";var o=$.extend(!0,{},t,{icon:"tn8-icon-protractor",titleKey:"tools:singleDegreeProtractor",previewerTitle:"Protractor",href:"#singleDegreeProtractor",on:function(){this._$contentEl.measurementToolbox("clear"),this._$contentEl.measurementToolbox("singleDegreeProtractor"),$(document).trigger("Used.SingleDegreeProtractor")},off:function(){this._$contentEl.measurementToolbox("clear")}});return o}),e("buttons/CalculatorButton",[],function(){"use strict";var t,o={id:"calculatorFourFunction",icon:"tn8-icon-calculator",titleKey:"tools:fourFunction",previewerTitle:"Four Function Calculator",href:"#calculatorFourFunction",on:function(){$(document).trigger("Used.Calc4Func"),t.clear(),t.fourFunction()},off:function(){t.off()},setContentContainer:function(o){try{t=calculatorToolboxAPI.createCalculatorToolbox($("#divCalculator"))}catch(t){throw new Error("calculatorToolboxAPI is undefined")}}},e={id:"calculatorFiveFunction",icon:"tn8-icon-calculator",titleKey:"tools:fiveFunction",previewerTitle:"Five Function Calculator",href:"#calculatorFiveFunction",on:function(){$(document).trigger("Used.Calc5Func"),t.clear(),t.fiveFunction()},off:function(){t.off()},setContentContainer:function(o){try{t=calculatorToolboxAPI.createCalculatorToolbox($("#divCalculator"))}catch(t){throw new Error("calculatorToolboxAPI is undefined")}}},n={id:"calculatorScientific",icon:"tn8-icon-calculator",previewerTitle:"Scientific Calculator",titleKey:"tools:scientificCalculator",href:"#calculatorScientific",on:function(){$(document).trigger("Used.CalcScientific"),t.clear(),t.scientific()},off:function(){t.off()},setContentContainer:function(o){try{t=calculatorToolboxAPI.createCalculatorToolbox($("#divCalculator"))}catch(t){throw new Error("calculatorToolboxAPI is undefined")}}},i={FourFunctionCalculator:o,FiveFunctionCalculator:e,ScientificCalculator:n};return i}),e("buttons/AnswerEliminatorButton",[],function(){"use strict";var t=null,o={icon:"tn8-icon-answer-eliminator",titleKey:"tools:answerEliminator",previewerTitle:"Answer Eliminator",href:"#answerEliminator",on:function(){t.on(),$(document).trigger("Used.AnswerEliminator")},off:function(){t.setEnabled(!1)},setContentContainer:function(o){try{t||(console.log("### created new AE"),t=new AnswerEliminatorController),t.setContentContainer(o),t.initialize(),TN8.answerEliminatorController=t}catch(t){throw new Error("answerEliminator is undefined")}},available:function(){return t.getAvailable()},reset:function(o){o.removeClass("active"),t&&(t.destroy(),t.initialize(),t.getAvailable()?o.removeClass("disabled").attr("aria-disabled",!1):o.addClass("disabled").attr("aria-disabled",!0))}};return o}),e("buttons/HighlighterToolButton",[],function(){"use strict";var t=!1,o={icon:"tn8-icon-text-highlight",titleKey:"tools:highlighterTool",previewerTitle:"",href:"#textHighlighter",on:function(){t&&t.toggleHighlighter(!0)},off:function(){t&&t.destroy()},setContentContainer:function(o){if("undefined"==typeof highlighterToolAPI)throw new Error("highlighterToolAPI is undefined");t=highlighterToolAPI.createToolbox(o).highlighterToolController}};return o}),e("buttons/TICalcButton",["./Button"],function(t){"use strict";var o,e,n=function(){return window.TestEngine&&3!==TestEngine.getTestDefine()._securityLevel&&(TestEngine.getNativeComponent().isLocked()||TestEngine.isNativeComponentActive())},i=function(t){$(document).trigger("tn.loadingModal.off"),window.app&&loading.modal("hide"),$(document).trigger("CalcDestroyOnLostFocus"),o.focus(),o.monitorDeepZoom()},r=function(){$("[href^='#calculatorTI']").hasClass("active")&&($("button[toolid=0]").click(),$("[href^='#calculatorTI']").removeClass("active"))},a=function(){o&&o.hide()},l=function(){$(document).trigger("unloadTICalc"),o&&($("#calculatorDiv")&&$("#calculatorDiv").removeClass(o.name),clearInterval(o.interval),o.remove()),o=null,["TI30","TI30_lcd","TI84","TI84_lcd","TI108","TI108_lcd"].forEach(function(t){window[t]=null})};$(document).on("ti.calc.destroy",l),$(document).on("ti.calc.resetBtn",r);var c=function(t){return function(){$(document).trigger("Used."+t);var a=!TN8.usecalcs&&window.app,c=window.TestEngine&&(navigator.userAgent.match(/Windows Phone/i)||TestEngine.isIdevice()||TestEngine.isAndroidOS()),s=screen.width<700||screen.height<700;a||!n()&&c&&s?(!window.app&&TN8.log("TI CALC NOT SUPPORTED: screen width = "+screen.width+", screen height = "+screen.height,TN8.IMPORTANT),$.jGrowl("TI Calculators are not supported on this device",{theme:"warning closehotspot",life:5e3,sticky:!1}),$(document).trigger("tn.loadingModal.off"),window.app&&loading.modal("hide"),setTimeout(r,0)):o&&o.name===t?(i(),o.show()):(l(),e=TIControllerAPI&&TIControllerAPI.createToolController(),o=new e[t],$(document).off(o.readyEvent,i).one(o.readyEvent,i),o.initialize(n()))}},s=$.extend(!0,{},t,{icon:"tn8-icon-calculator",titleKey:"tools:ti84",previewerTitle:"TI84 CE Graphing Calculator",href:"#calculatorTI84",on:c("TI84"),off:a,isTICalc:!0}),u=$.extend(!0,{},t,{icon:"tn8-icon-calculator",titleKey:"tools:ti30",previewerTitle:"TI30 Scientific Calculator",href:"#calculatorTI30",on:c("TI30"),off:a,isTICalc:!0}),h=$.extend(!0,{},t,{icon:"tn8-icon-calculator",titleKey:"tools:ti108",previewerTitle:"TI108 Basic Calculator",href:"#calculatorTI108",on:c("TI108"),off:a,isTICalc:!0});return{TI84:s,TI30:u,TI108:h}}),e("buttons/NotepadButton",[],function(){"use strict";var t,o={icon:"tn8-icon-text-highlight",titleKey:"tools:notepad",href:"#notepad",previewerTitle:"Notepad",on:function(){t.show(),$(document).trigger("Used.Notepad")},off:function(){$("#notepadContainer").hide()},setContentContainer:function(o){if("undefined"==typeof notepadAPI)throw new Error("notepadAPI is undefined");t=notepadAPI.createToolbox(o).notepad,this.el=o,0===$("#notepad").length&&t&&t.init(o)}};return o}),e("buttons/DictionaryButton",[],function(){"use strict";var t={icon:"tn8-icon-dictClosed",titleKey:"tools:dictionary",previewerTitle:"Dictionary and Thesaurus",href:"#dictionary",toolID:27,dictObj:void 0,setContentContainer:function(t){"undefined"==typeof DictionaryToolAPI||this.dictObj||(this.dictObj=new DictionaryToolAPI(t,$.i18n?$.i18n.t(this.titleKey):"Dictionary and Thesaurus",this.toolID))},on:function(){$(document).trigger("Used.Dictionary3-5"),this.dictObj._show()},off:function(){this.dictObj._hide()}},o={icon:"tn8-icon-dictClosed",titleKey:"tools:dictionary",previewerTitle:"Dictionary and Thesaurus",href:"#dictionary",toolID:28,dictObj:void 0,setContentContainer:function(t){"undefined"==typeof DictionaryToolAPI||this.dictObj||(this.dictObj=new DictionaryToolAPI(t,$.i18n?$.i18n.t(this.titleKey):"Dictionary and Thesaurus",this.toolID))},on:function(){$(document).trigger("Used.Dictionary6-8"),this.dictObj._show()},off:function(){this.dictObj._hide()}},e={icon:"tn8-icon-dictClosed",titleKey:"tools:dictionary",previewerTitle:"Dictionary and Thesaurus",href:"#dictionary",toolID:29,dictObj:void 0,setContentContainer:function(t){"undefined"==typeof DictionaryToolAPI||this.dictObj||(this.dictObj=new DictionaryToolAPI(t,$.i18n?$.i18n.t(this.titleKey):"Dictionary and Thesaurus",this.toolID))},on:function(){$(document).trigger("Used.DictionaryHS"),this.dictObj._show()},off:function(){this.dictObj._hide()}},n={icon:"tn8-icon-dictClosed",titleKey:"tools:spanishDictionary",previewerTitle:"Spanish-English Dictionary",href:"#dictionary",toolID:30,dictObj:void 0,setContentContainer:function(t){"undefined"==typeof DictionaryToolAPI||this.dictObj||(this.dictObj=new DictionaryToolAPI(t,$.i18n?$.i18n.t(this.titleKey):"Spanish-English Dictionary",this.toolID))},on:function(){$(document).trigger("Used.DictionarySp-En"),this.dictObj._show()},off:function(){this.dictObj._hide()}};return{ElemDictionaryButton:t,MidDictionaryButton:o,HighDictionaryButton:e,SpanDictionaryButton:n}}),e("buttons/ScratchpadButton",[],function(){"use strict";var t,o={icon:"tn8-icon-text-highlight",titleKey:"tools:scratchpad",href:"#notepad",previewerTitle:"Scratchpad",on:function(){$("#notepadContainer").hasClass("drawing-closed")||$("#open-lc").click(),$("#notepadContainer",this.el).show("fast",function(){$(document).trigger("deepZoomLayer.setCoupling",{title:"Scratchpad",html:"#notepadContainer"});var t=$("#main_panel");t&&$("#notepadContainer textarea",t).focus()}),$(document).trigger("Used.Scratchpad")},off:function(){$("#notepadContainer",this.el).hide(),$(document).trigger("deepZoomLayer.hide")},setContentContainer:function(o){if("undefined"==typeof notepadAPI)throw new Error("scratchpadAPI is undefined");t=notepadAPI.createToolbox(o).notepad,this.el=o,0===$("#notepad",this.el).length&&t&&t.init(o,!0)}};return o}),e("ButtonFactory",["./buttons/DesmosButton","./buttons/PointerButton","./buttons/QuarterInchRuler","./buttons/EighthInchRuler","./buttons/CentimeterRuler","./buttons/MillimeterRuler","./buttons/StraightEdge","./buttons/Protractor","./buttons/SingleDegreeProtractorButton","./buttons/CalculatorButton","./buttons/AnswerEliminatorButton","./buttons/HighlighterToolButton","./buttons/TICalcButton","./buttons/NotepadButton","./buttons/DictionaryButton","./buttons/ScratchpadButton"],function(){var t=function(t,o){this.$parentEl=t,this.$contentEl=o,this.TOOL_POINTER=0,this.TOOL_QUARTER_INCH_RULER=5,this.TOOL_EIGHTH_INCH_RULER=6,this.TOOL_CENTIMETER_RULER=11,this.TOOL_MILLIMETER_RULER=19,this.TOOL_STRAIGHTEDGE=20,this.TOOL_PROTRACTOR=7,this.TOOL_SINGLE_DEGREE_PROTRACTOR=21,this.TOOL_SCIENTIFIC_CALC=9,this.TOOL_FOUR_FUNCTION_CALC=10,this.TOOL_FIVE_FUNCTION_CALC=12,this.TOOL_ANSWER_ELIMINATOR=14,this.TOOL_HIGHLIGHTER_TOOL=15,this.TOOL_TI_84_CALC=13,this.TOOL_TI_30_CALC=16,this.TOOL_TI_108_CALC=17,this.TOOL_DESMOS_FOUR_FUNCTION_CALC=22,this.TOOL_DESMOS_SCIENTIFIC_CALC=23,this.TOOL_DESMOS_GRAPH_CALC=24,this.TOOL_EXPANDABLE_PASSAGE=25,this.TOOL_DYNAMIC_TTS=26,this.TOOL_DICTIONARY_ELEM=27,this.TOOL_DICTIONARY_MID=28,this.TOOL_DICTIONARY_HIGH=29,this.TOOL_DICTIONARY_SPAN=30,this.TOOL_NOTEPAD=9001,this.TOOL_SCRATCHPAD=9002,this.ALL_VALID_TOOLS=[this.TOOL_POINTER,this.TOOL_QUARTER_INCH_RULER,this.TOOL_EIGHTH_INCH_RULER,this.TOOL_CENTIMETER_RULER,this.TOOL_MILLIMETER_RULER,this.TOOL_STRAIGHTEDGE,this.TOOL_PROTRACTOR,this.TOOL_SINGLE_DEGREE_PROTRACTOR,this.TOOL_SCIENTIFIC_CALC,this.TOOL_FOUR_FUNCTION_CALC,this.TOOL_FIVE_FUNCTION_CALC,this.TOOL_ANSWER_ELIMINATOR,this.TOOL_HIGHLIGHTER_TOOL,this.TOOL_TI_84_CALC,this.TOOL_TI_30_CALC,this.TOOL_TI_108_CALC,this.TOOL_DESMOS_FOUR_FUNCTION_CALC,this.TOOL_DESMOS_SCIENTIFIC_CALC,this.TOOL_DESMOS_GRAPH_CALC,this.TOOL_EXPANDABLE_PASSAGE,this.TOOL_DYNAMIC_TTS,this.TOOL_DICTIONARY_ELEM,this.TOOL_DICTIONARY_MID,this.TOOL_DICTIONARY_HIGH,this.TOOL_DICTIONARY_SPAN,this.TOOL_NOTEPAD,this.TOOL_SCRATCHPAD]};return t.prototype._getButton=function(t){var e=null;switch(t){case this.TOOL_POINTER:e=o("buttons/PointerButton");break;case this.TOOL_QUARTER_INCH_RULER:e=o("buttons/QuarterInchRuler");break;case this.TOOL_EIGHTH_INCH_RULER:e=o("buttons/EighthInchRuler");break;case this.TOOL_CENTIMETER_RULER:e=o("buttons/CentimeterRuler");break;case this.TOOL_MILLIMETER_RULER:e=o("buttons/MillimeterRuler");break;case this.TOOL_STRAIGHTEDGE:e=o("buttons/StraightEdge");break;case this.TOOL_PROTRACTOR:e=o("buttons/Protractor");break;case this.TOOL_SINGLE_DEGREE_PROTRACTOR:e=o("buttons/SingleDegreeProtractorButton");break;case this.TOOL_SCIENTIFIC_CALC:e=o("buttons/CalculatorButton").ScientificCalculator;break;case this.TOOL_FOUR_FUNCTION_CALC:e=o("buttons/CalculatorButton").FourFunctionCalculator;break;case this.TOOL_FIVE_FUNCTION_CALC:e=o("buttons/CalculatorButton").FiveFunctionCalculator;break;case this.TOOL_ANSWER_ELIMINATOR:e=o("buttons/AnswerEliminatorButton");break;case this.TOOL_HIGHLIGHTER_TOOL:e=o("buttons/HighlighterToolButton");break;case this.TOOL_TI_84_CALC:e=o("buttons/TICalcButton").TI84;break;case this.TOOL_TI_30_CALC:e=o("buttons/TICalcButton").TI30;break;case this.TOOL_TI_108_CALC:e=o("buttons/TICalcButton").TI108;break;case this.TOOL_DESMOS_FOUR_FUNCTION_CALC:e=o("buttons/DesmosButton").FourFunctionCalculator;break;case this.TOOL_DESMOS_GRAPH_CALC:e=o("buttons/DesmosButton").GraphingCalculator;break;case this.TOOL_DESMOS_SCIENTIFIC_CALC:e=o("buttons/DesmosButton").ScientificCalculator;break;case this.TOOL_DICTIONARY_ELEM:e=o("buttons/DictionaryButton").ElemDictionaryButton;break;case this.TOOL_DICTIONARY_MID:e=o("buttons/DictionaryButton").MidDictionaryButton;break;case this.TOOL_DICTIONARY_HIGH:e=o("buttons/DictionaryButton").HighDictionaryButton;break;case this.TOOL_DICTIONARY_SPAN:e=o("buttons/DictionaryButton").SpanDictionaryButton;break;case this.TOOL_NOTEPAD:e=o("buttons/NotepadButton");break;case this.TOOL_SCRATCHPAD:e=o("buttons/ScratchpadButton")}return e&&e.setContentContainer&&e.setContentContainer(this.$contentEl),e},t.prototype.buildButton=function(t){var o=this._getButton(t);if(null!==o){$.i18n&&o.titleKey&&o.titleKey.length>0?o.title=$.i18n.t(o.titleKey):o.title=o.previewerTitle;var e=$("<button>");e.addClass("btn"),e.attr({title:o.title,"aria-label":o.title,"aria-pressed":!1,href:o.href,toolid:t});var n=$("<i>");return n.addClass(o.icon),e.html(n),e.on("click",$.proxy(this.onButtonClick,this)),{controller:o,$btn:e}}},t.prototype.onToolClosed=function(t,o){if(o){var e=$("#drawingToolBar").find("button[toolid="+o+"]");e.hasClass("active")&&e.click()}},t.prototype.onButtonClick=function(t){var o=$(t.target).closest("button"),e=parseInt(o.attr("toolID"));this._getButton(e);this.resetDefault(e)},t.prototype.resetDefault=function(t){var o=$("#drawingToolBar").find("button[toolid="+t+"]"),e=this._getButton(t);if(o.hasClass("disabled"))return!1;(e.isTICalc||e.isDesmosCalc)&&($(document).trigger("tn.loadingModal.on"),window.app&&loading.modal("show"));var n=this.$parentEl.find(".active").not(o);n.removeClass("active"),n.attr("aria-pressed",!1);var i=new String(n.attr("toolid")),r=this._getButton(parseInt(i));r&&r.off(),o.hasClass("active")?(e.off(),(e.isTICalc||e.isDesmosCalc)&&($(document).trigger("tn.loadingModal.off"),window.app&&loading.modal("hide")),o.attr("aria-pressed",!1)):(e.on(),o.attr("aria-pressed",!0)),o.toggleClass("active"),0===$("#drawingToolBar button.active").length&&$("button[toolid=0]").click()},t.prototype.cleanup=function(){this.$contentEl.off("next_item")},t}),e("ToolController",["./ButtonFactory"],function(t){var o=function(o){if(!o.hasOwnProperty("buttonContainerId")){var e="A property called 'buttonContainerId' is required in the configuration object to initialize the tool controller.";throw new Error(e)}if(!o.hasOwnProperty("contentContainerId")){var e="A property called 'contentContainerId' is required in the configuration object to initialize the tool controller.";throw new Error(e)}if(!o.hasOwnProperty("toolIds")){var e="A toolIds array is required in the configuration object to initialize the tool controller.";throw new Error(e)}if(void 0!=o.toolIds&&!o.toolIds.hasOwnProperty("length")){var e="The toolIds property must be an array. If no tools are available, pass an empty array.";throw new Error(e)}this.$el=$("#"+o.buttonContainerId),this.$contentEl=$("#"+o.contentContainerId),this._factory=new t(this.$el,this.$contentEl),this.MIC_CHECK_ID=18,o.toolIds=this._validateToolIds(o.toolIds,this._factory.ALL_VALID_TOOLS),this._checkForArrowButton(o.toolIds),this.toolIds=this._removeDuplicatesFromIdArray(o.toolIds),this._toolButtons={}};return o.prototype._validateToolIds=function(t,o){for(var e=[],n=0;n<t.length;n++)o.indexOf(t[n])!==-1&&e.push(t[n]);return e},o.prototype._checkForArrowButton=function(t){var o=[this._factory.TOOL_HIGHLIGHTER_TOOL,this.MIC_CHECK_ID,this._factory.TOOL_EXPANDABLE_PASSAGE,this._factory.TOOL_DYNAMIC_TTS],e=this._intersection(o,t);t.length!==e.length&&t.unshift(0)},o.prototype._intersection=function(t,o){var e,n,i=[];for(e=0;e<t.length;e++)for(n=0;n<o.length;n++)t[e]===o[n]&&i.push(t[e]);return i},o.prototype.initialize=function(){var t,o;if((1!==this.toolIds.length||this.toolIds[0]!==this._factory.TOOL_POINTER)&&0!==this.toolIds.length)for(var e=0;e<this.toolIds.length;e++)if(t=this.toolIds[e],o=this._factory.buildButton(t)){switch(t){case this._factory.TOOL_HIGHLIGHTER_TOOL:o.controller.on();break;case this._factory.TOOL_POINTER:o.controller.on(),o.$btn&&(o.$btn.toggleClass("active").attr("aria-pressed",!0),this.$el.append(o.$btn));break;case this._factory.TOOL_ANSWER_ELIMINATOR:o.controller.available()||o.$btn.addClass("disabled").attr("aria-disabled",!0),$(this.$contentEl).one("next_item",$.proxy(this._resetButtons,this));default:o.$btn&&this.$el.append(o.$btn)}this._toolButtons[t]=o}$(document).on("toolClosed",$.proxy(this._factory.onToolClosed,this._factory)),$(document).trigger("ToolControllerInitialized")},o.prototype._resetButtons=function(t){var o=this._toolButtons[this._factory.TOOL_ANSWER_ELIMINATOR];o.controller.reset(o.$btn)},o.prototype._removeDuplicatesFromIdArray=function(t){var o=[];return $.each(t,function(t,e){$.inArray(e,o)===-1&&o.push(e)}),o},o.prototype.getToolState=function(){var t=[];if(this.toolIds&&this.toolIds.indexOf(this._factory.TOOL_ANSWER_ELIMINATOR)>-1&&TN8.answerEliminatorController&&TN8.answerEliminatorController.getAvailable()&&t.push(TN8.answerEliminatorController.getState()),this.toolIds&&this.toolIds.indexOf(this._factory.TOOL_HIGHLIGHTER_TOOL)>-1&&"undefined"!=typeof highlighterToolAPI){var o=highlighterToolAPI.toolbox.highlighterToolController;t.push(o.getState())}if(this.toolIds&&(this.toolIds.indexOf(this._factory.TOOL_NOTEPAD)>-1||this.toolIds.indexOf(this._factory.TOOL_SCRATCHPAD)>-1)&&"undefined"!=typeof notepadAPI){var e=notepadAPI.createToolbox(this.$contentEl).notepad;t.push(e.getState())}return t},o.prototype.setToolState=function(t){this.toolIds.indexOf(this._factory.TOOL_ANSWER_ELIMINATOR)>-1&&this.$contentEl.trigger("next_item");for(var o,e=0;e<t.length;e++)if(o=t[e]&&t[e].id)if(o===this._factory.TOOL_ANSWER_ELIMINATOR&&this.toolIds.indexOf(this._factory.TOOL_ANSWER_ELIMINATOR)>-1)TN8.answerEliminatorController&&(TN8.answerEliminatorController.destroy(),TN8.answerEliminatorController.initialize(),TN8.answerEliminatorController.addEventListeners(),TN8.answerEliminatorController.setEnabled(!1),TN8.answerEliminatorController.setState(t[e]),$(document).trigger("AccommodationSetStateDone","AnswerEliminatorStateSuccess"));else if(o===this._factory.TOOL_HIGHLIGHTER_TOOL&&this.toolIds.indexOf(this._factory.TOOL_HIGHLIGHTER_TOOL)>-1){if("undefined"!=typeof highlighterToolAPI){var n=highlighterToolAPI.toolbox.highlighterToolController;n.setState(t[e]),$(document).trigger("AccommodationSetStateDone","HighlighterToolStateSuccess")}}else if((o===this._factory.TOOL_NOTEPAD&&this.toolIds.indexOf(this._factory.TOOL_NOTEPAD)>-1||o===this._factory.TOOL_SCRATCHPAD&&this.toolIds.indexOf(this._factory.TOOL_SCRATCHPAD)>-1)&&"undefined"!=typeof notepadAPI){var i=notepadAPI.createToolbox(this.$contentEl).notepad;i.setState(t[e].s,t[e].dr),$(document).trigger("AccommodationSetStateDone","NotepadStateSuccess")}},o.prototype.cleanup=function(){for(var t=0;t<this.toolIds.length;t++){var o=this.toolIds[t],e=this._toolButtons[o];if(e)if(e.controller.off&&e.controller.off(),e.$btn&&e.$btn.remove(),o===this._factory.TOOL_ANSWER_ELIMINATOR)TN8.answerEliminatorController&&(TN8.answerEliminatorController.destroy(),delete TN8.answerEliminatorController);else if(o===this._factory.TOOL_NOTEPAD||o===this._factory.TOOL_SCRATCHPAD){if("undefined"!=typeof notepadAPI){var n=notepadAPI.createToolbox(this.$contentEl).notepad;n.destroy()}}else o!==this._factory.TOOL_DICTIONARY_ELEM&&o!==this._factory.TOOL_DICTIONARY_MID&&o!==this._factory.TOOL_DICTIONARY_HIGH&&o!==this._factory.TOOL_DICTIONARY_SPAN||"undefined"!=typeof DictionaryToolAPI&&e.controller.dictObj&&(e.controller.dictObj._destroy(),e.controller.dictObj=void 0)}$(document).off("toolClosed",$.proxy(this._factory.onToolClosed,this._factory)),this.$el.empty(),this._factory.cleanup(),this.toolIds=[],this._toolButtons={},$(this.$contentEl).off("next_item",$.proxy(this._resetButtons,this))},o}),e("main",["./ToolController"],function(t){"use strict";var o={};return o.createToolController=function(o){var e=new t(o);return e},o}),o("main")});
