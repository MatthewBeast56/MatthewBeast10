define(["require","exports"],function(e,t){!function(e){var t=function(){function e(){this.staticRef=e,this._locked=!1,this.appCheckTimer=void 0,this.isAppCheckInProgress=!1,e._that=this,this.SIRI_SERVICE_NAME="SiriNCService",this.AIRPLAY_NAME="com.apple.CGXPCServicesAgent",this.GAME_BAR_NAME="GamePanel.exe",this.GAME_BAR_NAME_NEW="GameBar.exe",this.DICTATION_SERVICE_NAME="DictationIM",this.COPYQ_NAME="copyq.exe",this.CLIPMATE_NAME="clipMate.exe",this.DITTO_NAME="ditto.exe",this.APPLEVNCAGENT="vncagent",this.SCREENSHARINGAGENT="screenSharingAgent",this.greylist=[{processName:this.SIRI_SERVICE_NAME,details:"TestNav has detected Siri running in the background. Please disable Siri before signing in to TestNav.",appcheckTitle:"BlacklistSiri",errorCode:"5036"},{processName:this.AIRPLAY_NAME,details:"TestNav has detected that Airplay is running. Please disable Airplay.",appcheckTitle:"BlacklistAirplay",errorCode:"5043"},{processName:this.GAME_BAR_NAME,details:"TestNav has detected Game Bar running in the background. Please disable Game Bar before signing in to TestNav.",appcheckTitle:"BlacklistGameBar",errorCode:"5041"},{processName:this.GAME_BAR_NAME_NEW,details:"TestNav has detected Game Bar running in the background. Please disable Game Bar before signing in to TestNav.",appcheckTitle:"BlacklistGameBar",errorCode:"5041"},{processName:this.DICTATION_SERVICE_NAME,details:"A Dictation service was detected on MAC OS which has been blacklisted.",appcheckTitle:"BlacklistDictation",errorCode:"5037"},{processName:this.COPYQ_NAME,details:"TestNav has detected that CopyQ Clipboard is running. Please disable CopyQ Clipboard and sign in to TestNav again.",appcheckTitle:"BlacklistCopyQ",errorCode:"5046"},{processName:this.CLIPMATE_NAME,details:"TestNav has detected that ClipMate Clipboard is running. Please disable ClipMate Clipboard and sign in to TestNav again.",appcheckTitle:"BlacklistClipMate",errorCode:"5047"},{processName:this.DITTO_NAME,details:"TestNav has detected that Ditto Clipboard is running. Please disable Ditto Clipboard and sign in to TestNav again.",appcheckTitle:"BlacklistDitto",errorCode:"5045"},{processName:this.APPLEVNCAGENT,details:"N/A",appcheckTitle:"BlacklistAppleVncAgent",errorCode:"5032"},{processName:this.SCREENSHARINGAGENT,details:"N/A",appcheckTitle:"BlacklistScreenSharingAgent",errorCode:"5032"}],this.NATIVE_CHROME="NATIVE_CHROME",this.NATIVE_CORDOVA="NATIVE_CORDOVA",this.NATIVE_ANDROID="NATIVE_ANDROID",this.NATIVE_JXBROWSER="NATIVE_JXBROWSER",this.NATIVE_GENERIC="NATIVE_GENERIC",this.FORCEQUITWINDOWS="CTRLALTDELETE",this.FORCEQUITMAC="QUIT APP",e._that._isProxyActive=!1}return e.WHITELIST_ERROR="encerror",e.WHITELIST_SUCCESS="encsuccess",e.LOCK_ERROR="lockerror",e.LOCK_SUCCESS="locksuccess",e.UNLOCK_ERROR="unlockerror",e.UNLOCK_SUCCESS="unlocksuccess",e.ERROR="error",e.SUCCESS="success",e.DESKTOP_UNLOCKED="unlocked",e.DESKTOP_LOCKED="locked",e.NETWORK_REACHABLE="netreachable",e.NETWORK_UNREACHABLE="netunreachable",e.prototype.getNativeType=function(){return this.NATIVE_GENERIC},e.prototype.getTestDefine=function(e){var t={};t.context=this,t.dataType="json",t.timeout=15e3;var n=window.TestEngine._apiBaseUri+window.TestEngine.getTestdefRelativeUrl();this.getNativeComponent()&&(n=this.getNativeComponent().buildTestDefUrl()),this._addGenericCallbacks(t,"getTestDef",n,e,"TestEngine"),$.ajax(n,t)},e.prototype.buildTestDefUrl=function(t){var n="",o=window.TestEngine;if(!t)var t={};return n=e._that.getNativeComponent()&&o.isLevel3Test()?o._apiBaseUri+o.getTestdefRelativeUrl():(e._that.getNativeComponent()?e._that.getNativeComponent().getSecureLocalUrl():"")+"/api/8.0"+o.getTestdefRelativeUrl()},e.prototype.getItemFlavor=function(e,t){var n=window.TestEngine._navigation,o=n._apiBaseUrl+window.TestEngine.getItemFlavorRelativeUrl(e),i={};i.type="GET",i.context=this,i.dataType="json",i.timeout=6e5,this._addGenericCallbacks(i,"getItemFlavor",o,t,"Navigation"),$.ajax(o,i)},e.prototype.preloadResources=function(e,t){var n=this.getNativeComponent().getSecureLocalUrl()+"/command/preload",o={};o.type="POST",o.timeout=1e6,o.data=e.join(","),o.dataType="json",this._addGenericCallbacks(o,"preloadResources",n,t,"Navigation"),$.ajax(n,o)},e.prototype.getCATConfig=function(t,n){var o=e._that,i=(window.TestEngine._navigation,e._that.getNativeComponent().getAjaxPostSettings());i.data=JSON.stringify(t),i.success=function(e,t,i){("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),o.processGenericSuccessResponse("getCATConfig",e,s,i,n)},i.error=function(e,t,i){o.processGenericErrorResponse("getCATConfig","AdaptiveNavigator",e,t,i,n)};var r="/form/"+window.TestEngine.getAuthentication().getFormId()+"/login/"+window.TestEngine.getAuthentication().getLoginId()+"/catConfig",s=e._that.getNativeComponent().getApiUrl()+r;$.ajax(s,i)},e.prototype.navigateAndSaveCAT=function(t,n,o){var i=e._that,r=(window.TestEngine._navigation,e._that.getNativeComponent().getAjaxPostSettings()),s=e._that.getNativeComponent().getApiUrl()+"/"+t;r.success=function(e,n,r){("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),i.processGenericSuccessResponse("navigateAndSaveCAT",e,t,r,o)},r.error=function(e,t,n){i.processGenericErrorResponse("navigateAndSaveCAT","AdaptiveNavigator",e,t,n,o)},r.data=n,$.ajax(s,r)},e.prototype.scoreResponse=function(t,n,o){var i=e._that,r=(window.TestEngine._navigation,e._that.getNativeComponent().getAjaxPostSettings()),s=e._that.getNativeComponent().getApiUrl()+"/"+t;r.success=function(e,n,r){("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),i.processGenericSuccessResponse("scoreResponse",e,t,r,o)},r.error=function(e,t,n){i.processGenericErrorResponse("scoreItem","SequentialNavigator",e,t,n,o)},r.data=n,$.ajax(s,r)},e.prototype.getCorrectTestCases=function(t,n){var o=e._that,i={};i.type="GET",i.context=this,i.dataType="json";var r=window.TestEngine.getHttpsUrl(window.location.origin)+"/"+t;i.success=function(e,i,r){("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),o.processGenericSuccessResponse("getCorrectTestCases",e,t,r,n)},i.error=function(e,t,i){o.processGenericErrorResponse("getCorrectTestCases","SequentialNavigator",e,t,i,n)},$.ajax(r,i)},e.prototype.scoreFeedback=function(t,n,o){var i=e._that,r={};r.type="POST",r.context=this;var s=window.TestEngine.getHttpsUrl(window.location.origin)+"/"+t;r.success=function(e,n,r){("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),i.processGenericSuccessResponse("scoreFeedback",e,t,r,o)},r.error=function(e,t,n){i.processGenericErrorResponse("scoreFeedback","SequentialNavigator",e,t,n,o)},r.data={items:n},$.ajax(s,r)},e.prototype.getAllStates=function(t,n,o){var i=e._that,r=e._that.getNativeComponent().getAjaxPostSettings();r.success=function(e,n,r){if("string"==typeof e||e instanceof String)try{e=JSON.parse(e)}catch(t){e=void 0}i.processGenericSuccessResponse("getAllStates",e,t,r,o)},r.error=function(e,t,n){i.processGenericErrorResponse("getAllStates","State",e,t,n,o)},r.data=n;var s=e._that.getNativeComponent().getApiUrl()+t;s.indexOf("http://")!==-1&&3===parseInt(window.TestEngine.getStateComponent()._securityLevel)&&(s=window.TestEngine.getHttpsUrl(s)),$.ajax(s,r)},e.prototype.setMultipleItemStates=function(t,n,o){var i=e._that,r=e._that.getNativeComponent().getAjaxPostSettings();r.success=function(e,n,r){if("string"==typeof e||e instanceof String)try{e=JSON.parse(e)}catch(t){e=void 0}i.processGenericSuccessResponse("setMultipleItemStates",e,t,r,o)},r.timeout=3e4,r.error=function(e,t,n){i.processGenericErrorResponse("setMultipleItemStates","State",e,t,n,o)},r.data=n;var s=e._that.getNativeComponent().getApiUrl()+t;s.indexOf("http://")!==-1&&3===parseInt(window.TestEngine.getStateComponent()._securityLevel)&&(s=window.TestEngine.getHttpsUrl(s)),$.ajax(s,r)},e.prototype.exitTest=function(t,n,o){var i=e._that,r=e._that.getNativeComponent().getAjaxPostSettings();r.contentType=void 0,r.success=function(e,n,r){("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),i.processGenericSuccessResponse("exitTest",e,t,r,o)},r.error=function(e,t,n){i.processGenericErrorResponse("exitTest","TestEngine",e,t,n,o)},r.data=n;var s=e._that.getNativeComponent().getSecureRemoteUrl()+"/api/8.0"+t;s=window.TestEngine.getHttpsUrl(s),$.ajax(s,r)},e.prototype.submitTest=function(t,n,o){var i=e._that,r=e._that.getNativeComponent().getAjaxPostSettings();r.contentType=void 0,r.success=function(e,n,r){("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),i.processGenericSuccessResponse("submitTest",e,t,r,o)},r.error=function(e,t,n){i.processGenericErrorResponse("submitTest","TestEngine",e,t,n,o)},r.data=n;var s=e._that.getNativeComponent().getSecureRemoteUrl()+"/api/8.0"+t;s=window.TestEngine.getHttpsUrl(s),$.ajax(s,r)},e.prototype.getSectionProctorDetails=function(t,n,o){var i=e._that,r=e._that.getNativeComponent().getAjaxPostSettings();r.success=function(e,n,r){("string"==typeof e||e instanceof String)&&(e=JSON.parse(e)),i.processGenericSuccessResponse("remoteSectionControlConfig",e,t,r,o)},r.error=function(e,t,n){i.processGenericErrorResponse("remoteSectionControlConfig","TestEngine",e,t,n,o)},r.data=n;var s=e._that.getNativeComponent().getApiUrl()+t;$.ajax(s,r)},e.prototype.postExit=function(e){e()},e.prototype.setZoom=function(e){},e.prototype.getZoom=function(e){},e.prototype.resetZoom=function(){},e.prototype.exitApplication=function(){$(document).trigger("tn.route.to","logout"),window.location=window.testnav_local_url||"http://localhost:9004"},e.prototype.lockDesktop=function(){throw{message:"lockDesktop Not implemented"}},e.prototype.setEncryptionKeys=function(e,t,n,o,i,r){throw{message:"setEncryptionKeys Not implemented"}},e.prototype.clearCache=function(){throw{message:"clearCache not implemented"}},e.prototype.getSecureLocalUrl=function(){return""},e.prototype.getSecureRemoteUrl=function(){return""},e.prototype.isActive=function(){return!1},e.prototype.setActiveStatus=function(){throw{message:"setActiveStatus Not implemented"}},e.prototype.isLocked=function(){return this._locked},e.prototype.dispatch=function(e,t){console.log(t)},e.prototype.hasSecureEnvironment=function(){return!1},e.prototype.writeLog=function(e,t,n,o,i){i.call()},e.prototype.writeLogSuccess=function(e){throw{message:"writeLogSuccess Not implemented"}},e.prototype.writeLogFail=function(e,t,n){throw{message:"writeLogFail Not implemented"}},e.prototype.sendLog=function(e,t,n,o,i){throw{message:"sendLog Not implemented"}},e.prototype.setSecureLocalUrl=function(e){throw{message:"setSecureLocalUrl Not implemented"}},e.prototype.setSecureRemoteUrl=function(e){throw{message:"setSecureRemoteUrl Not implemented"}},e.prototype.checkForSecureEnv=function(){throw{message:"checkForSecureEnv Not implemented"}},e.prototype.sendParentMessage=function(e,t,n,o,i){throw{message:"sendParentMessage Not implemented"}},e.prototype.isProxyActive=function(){return this._isProxyActive},e.prototype.verifySecureMove=function(){return!0},e.prototype.chooseNewCustomer=function(e){throw{message:"chooseNewCustomer Not implemented"}},e.prototype.hasAppInitialized=function(){return!0},e.prototype.restrictParFilePreloading=function(){return!1},e.prototype.cleanupNative=function(){},e.prototype.cleanUp=function(){},e.prototype.practiceTestEnd=function(e,t){e.call()},e.prototype.unlockDesktop=function(){throw{message:"unlockDesktop Not implemented"}},e.prototype.canLockOrIsLockedByOS=function(e){e.call(this,!1)},e.prototype.getDeviceScreenSize=function(){},e.prototype.getDeviceModel=function(){},e.prototype.getRetryAttempts=function(e){return"getTestDefine"===e||"getItemFlavor"===e||"preloadResources"===e?1:"getCATConfig"===e?1:"setMultipleItemStates"===e&&window.TestEngine.lostFocusEventFired?1:3},e.prototype._addGenericCallbacks=function(e,t,n,o,i){var r=this;e.success=function(e,i,s){r.processGenericSuccessResponse(t,e,n,s,o)},e.error=function(e,n,s){r.processGenericErrorResponse(t,i,e,n,s,o)}},e.prototype.processGenericSuccessResponse=function(t,n,o,i,r){("string"==typeof n||n instanceof String)&&(n=JSON.parse(n));var s=new window.TestEngine.ResponseLib.Response,a=i.getAllResponseHeaders(),c="preloadResources"===t?n.itemHeaders:s.parseResponseHeaders(o,a);s.BuildResponse(t,void 0,void 0,!0,n,c),r.call(e._that.getNativeComponent(),s)},e.prototype.processGenericErrorResponse=function(t,n,o,i,r,s){window.TestEngine.logError("TestEngine call failed ("+t+")=> Error Cause "+i+", Error: "+r);var a,c=new window.TestEngine.ResponseLib.Response,p=o.getAllResponseHeaders(),l=c.parseResponseHeaders(t,p);"getCATConfig"===t||"scoreItem"===t||"navigateAndSaveCAT"===t?(c.setHeaders(l),a=e._that.getNativeComponent().buildCatErrorResponse(c,o),"timeout"===r&&(a.errorNum=504,a.command=t)):a=e._that.getNativeComponent().buildErrorResponse(n,o,i,r),c=c.BuildResponse(t,void 0,void 0,!1,a,l),"preloadResources"===t&&"Illegal Access"!==r&&c.setAbortedRequest(),"getAllStates"===t&&(a.msgCode=void 0),s.call(e._that.getNativeComponent(),c)},e.prototype.buildErrorResponse=function(t,n,o,i){var r=this;errorCode=r.getCallFailureCode(t,n,o,i);var s=e._that.buildErrorMessage(n.responseText),a={success:"no",msg:s,msgCode:errorCode};return a},e.prototype.buildCatErrorResponse=function(t,n){var o=t.getHeaderValue("x-testnav-cat-error"),i=e._that.buildErrorMessage(n.responseText,t.getHeaderValue("x-testnav-cat-message")),r={success:"no",msg:i,msgCode:o};return r},e.prototype.buildErrorMessage=function(e,t){var n="Server Connection Error";return t&&t.trim().length>0?t:e&&e.trim().length>0?e:n},e.prototype.getCallFailureCode=function(e,t,n,o){var i=!0,r=!0,s=this.getCallFailureCodeStart(e);switch(t.status){case 0:if("timeout"!==n)return s+"21";break;case 12029:if("timeout"!==n)return s+"21";break;case 12007:if("timeout"!==n)return s+"21";break;case 404:return s+"22";case 500:return s+"22";default:r=!1}switch(n){case"parsererror":return s+"23";case"timeout":return s+"24";case"abort":return s+"25";default:i=!1}if(!r&&!i)return s+"26"},e.prototype.getCallFailureCodeStart=function(e){switch(e){case"Authentication":return"50";case"State":return"60";case"Navigation":return"70";case"TestEngine":return"80";default:return"50"}},e.prototype.prepareSRFContent=function(e){return JSON.stringify(e)},e.prototype.detectScreenReaders=function(e,t){t&&t.call(window.TestEngine)},e.prototype.afterLostFocus=function(){},e.prototype.logSysInfo=function(){},e.prototype.getApiUrl=function(){return window.TestEngine._state._apiBaseUrl},e.prototype.startSRFSetup=function(e,t,n){t.apply(window.TestEngine,n)},e.prototype.extractSRFLocation=function(e){try{var t=JSON.parse(e);if(t.srfDeviceAlternate)return t.srfDeviceAlternate}catch(e){}},e.prototype.clearSRFLocation=function(){},e.prototype.isSRFLocationSet=function(){return!1},e.prototype.getAjaxPostSettings=function(){var e={};return e.dataType="json",e.contentType="application/json",e.context=this,e.timeout=6e4,e.type="POST",e},e.prototype.getNativeComponent=function(){return window.TestEngine._native?window.TestEngine._native:e._that},e.prototype.updatesAvailable=function(e){e.call(window.TestEngine,!1)},e.prototype.setSRFBackupPath=function(e,t,n,o){},e.prototype.isReadyToBeLocked=function(){return!0},e.prototype.afterStateRetrieved=function(e){e.call(window)},e.prototype.lockDesktopWrapper=function(e){e.call(window)},e.prototype.cloudClipboardDetected=function(e){var t=window.TestEngine._native;t.clipboardEvts=t.clipboardEvts?t.clipboardEvts:e,t._cloudClipboardCallback&&(t.isAppCheckInProgress||!window.TestEngine._testInformation||1===window.TestEngine._testInformation._securityLevel&&t.isLocked()||1!==window.TestEngine._testInformation._securityLevel?(t._cloudClipboardCallback.apply(t,[t.clipboardEvts]),delete t.clipboardEvts):setTimeout(t.cloudClipboardDetected,500))},e.prototype.registerCloudClipboardCallback=function(e){var t=window.TestEngine._native;if(!e||"function"!==$.type(e))throw{message:"registerCloudClipboardCallback must be must be passed a function"};t._cloudClipboardCallback=e},e.prototype.postErrorExit=function(e){var t=window.TestEngine;!t.areResponsesQueued()&&t.getAuthentication().getSessionToken()&&(t._isAppMode()?t._native.deleteResponseFile(t.getAuthentication().getLastSessionToken()+".SRF"):t._native.deleteSRF(t.getAuthentication().getLastSessionToken()+".SRF")),e.call(window)},e.prototype.cleanupMiddle=function(e){e&&e.call(window)},e.prototype.closeTestBatteryTest=function(e){e&&e.call(window)},e.prototype.preloadInitFiles=function(e,t){var n=window.TestEngine._native;window.TestEngine.checksumData.errorFEObj&&($(document).trigger("snitch.sendOut",window.TestEngine.checksumData.errorFEObj),delete window.TestEngine.checksumData.errorFEObj);var o=n.getSecureRemoteUrl();o=o.indexOf("/api/8.0")!==-1?o.substring(0,o.indexOf("/api/8.0")):o;var i=new Array;if(!window.TestEngine._initPreloadList||window.TestEngine._initPreloadList&&0===window.TestEngine._initPreloadList.length)return void e.call(window.TestEngine,{success:"yes"});for(var r=0;r<window.TestEngine._initPreloadList.length;r++)i.push(o+"/client/"+window.TestEngine._initPreloadList[r]);window.TestEngine._navigation._preloadUniqueResourceList.push(o+"/client/init.par");var s=function(t){window.TestEngine.ewsError(window.TestEngine,'{"success":"no","errorcode":"1009","msg":"Unable to load item content","details":"Preload Failed while downloading init files"}',window.TestEngine._native.preloadInitFiles,[e,!0])},a=function(o){t&&window.TestEngine._ewsRetrySucessfullCallback.call(n),window.TestEngine.emitEventWrapper(window.TestEngine.constructor.INIT_PAR_PRELOADED,"INIT par preloaded"),e.call(window.TestEngine,o)};window.TestEngine._serverInterface.preloadResources(i,a,s,n,void 0)},e.prototype.informTestSubmitted=function(){},e.prototype.compressContent=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0,o=e.length;n<o;++n)t.push(e.charCodeAt(n));var i=new Uint8Array(t),r=new Zlib.Deflate(i),s=r.compress(),a=8e3,c="";if(s.length<a)c+=String.fromCharCode.apply(null,s);else for(var n=0;n<s.length;)n+a>s.length?(a=s.length-n,c+=String.fromCharCode.apply(null,s.subarray(n,n+a))):c+=String.fromCharCode.apply(null,s.subarray(n,n+a)),n+=a;return btoa(c)},e.prototype.suspendAllRequests=function(){},e.prototype.startAppCheckTimer=function(e){var t=window.TestEngine._native,n=function(){e.call(window)};t.appCheckTimer=setTimeout(n,3e4)},e.prototype.stopAppCheckTimer=function(e){var t=window.TestEngine._native;clearTimeout(t.appCheckTimer)},e.prototype.setBlackListProcesses=function(e,t){e.call(window,{success:"yes"})},e.prototype.verifyForBlackList=function(e){e.call(window,-1)},e.prototype.switchLogs=function(e,t){t&&t.call(window,{success:!0})},e.prototype.isSwitchLogsSupported=function(){return window.TestEngine._native._APIVersion>=8},e.prototype.getOSDetails=function(e){e.call(window,"")},e.prototype.disposeMiddle=function(e){e.call(window)},e.prototype.getLocalHttpUrl=function(){return"http://localhost:9004"},e.prototype.getLostFocusProcessName=function(){return""},e.prototype.postProxyFail=function(e){e.call(window)},e.prototype.getProxyUrl=function(e){var t=window.TestEngine._native,n="";return n=e&&e.proxyserver?e.proxyport?t._proxySecondPass?"http://"+e.proxyserver+":"+e.proxyport:"http://"+e.proxyserver+":"+(parseInt(e.proxyport)+1):"http://"+e.proxyserver:""},e.prototype.isBlackListSupported=function(){return!1},e.prototype.appCheckKioskMode=function(e){e.call(window,!0)},e.prototype.postAppCheckCleanUp=function(e){e.call(window)},e.prototype.onTestSubmitted=function(){},e.prototype.onLogout=function(){},e.prototype.addDefaultBlacklistProcessesToConfig=function(e){},e.prototype.isSrfTestApplicable=function(e){var t=this.extractSRFLocation(e);return!!t},e.prototype.srfTestAppcheck=function(e,t){var n=this,o=function(o){var i=[];i.push({type:"srfDeviceAlternate",location:e,status:o.success}),t.call(n,i)};n.startSRFSetup(e,o)},e.prototype.onSelectTest=function(e){e.call(window,{})},e.prototype.indicateParentFatalError=function(){callback.call(window,{})},e.prototype.runInMixedMode=function(){return!1},e.prototype.addListener=function(e,t){window.TestEngine.addListener(e,t)},e.prototype.removeListener=function(e,t){window.TestEngine.addListener(e,t)},e.prototype.verifyWindowFullscreen=function(e){var t=!0;if(window.TestEngine._isAppMode())return!0;$(window);return 1===window.TestEngine._testInformation._securityLevel&&(window.fullScreen||(t=!1)),t},e.prototype.initiateBlackList=function(e,t){var n=window.TestEngine._native,o=function(t){if("yes"===t.success){window.TestEngine._blackListSet=!0;var o=function(t){n.processBlackList(t,e,!0)};n.verifyForBlackList(o)}else{window.TestEngine._blackListSet=!1;var i={msgCode:"5042",msg:"TestNav had an issue. Close this message, and sign in again."};window.TestEngine.logError(JSON.stringify(i)),window.TestEngine.emitEvent(new window.TestEngine.EventLib.Event(window.TestEngine.constructor.FATAL_ENGINE_ERROR,i))}};n.setBlackListProcesses(o,t.join(","))},e.prototype.checkForBlackList=function(e){var t=window.TestEngine._native;if(1===parseInt(window.TestEngine._state._securityLevel)&&window.TestEngine._blackListSet){window.TestEngine.logError("====BlackList Value======== "+window.TestEngine._blackListSet);var n=function(n){t.processBlackList(n,e)};t.verifyForBlackList(n)}else window.TestEngine.isClbkFunction(e)&&e.call(window)},e.prototype.processBlackList=function(e,t,n){var o=e.blacklistIndex;if(o!==-1){var i;try{i=JSON.parse(window.TestEngine._config)}catch(e){}var r=window.TestEngine._native.getBlackListProcesses(o,i);window.TestEngine.logError("Following black processes caused lost focus [ "+r+" ]");var s=function(){for(var e=0;e<window.TestEngine._native.greylist.length;e++)if(r.indexOf(window.TestEngine._native.greylist[e].processName)!==-1)return void window.TestEngine.emitEventWrapper(window.TestEngine.constructor.FATAL_ENGINE_ERROR,{msgCode:window.TestEngine._native.greylist[e].errorCode,msg:"5032"===window.TestEngine._native.greylist[e].errorCode?window.TestEngine._native.greylist[e].processName:window.TestEngine._native.greylist[e].details});window.TestEngine.emitEventWrapper(window.TestEngine.constructor.FATAL_ENGINE_ERROR,{msgCode:"5032",msg:r})};n?window.TestEngine._native.disposeMiddle(s):s()}else window.TestEngine.isClbkFunction(t)&&t.call(window);return o},e.prototype.getBlackListProcesses=function(e,t){for(var n=Number(e).toString(2).split("").reverse(),o="",i=0;i<n.length;i++)"1"===n[i]&&(0===o.length?o+=t.blacklist[i]:o=o+", "+t.blacklist[i]);return o},e.prototype.getErrorDetailsForLostFocus=function(e){var t=window.TestEngine._native,n=new Object;return n.processName=e,e&&e===t.FORCEQUITMAC?n.errorCode=3020:e&&e===t.FORCEQUITWINDOWS?n.errorCode=3022:n.errorCode=3005,n},e.prototype.hideWindowPopup=function(e){e&&e.call(window,{})},e}();e.Native=t}(t.TestEngine||(t.TestEngine={}))});
